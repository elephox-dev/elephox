#!/usr/bin/php
<?php
declare(strict_types=1);

define('APP_ROOT', dirname(__DIR__));
require_once APP_ROOT . '/vendor/autoload.php';

use Elephox\Console\ConsoleApplicationBuilder;
use Elephox\Support\Contract\ExceptionHandler;

$builder = ConsoleApplicationBuilder::create()
	->addLogging()
	->addWhoops()
;

$builder->commands->loadFromNamespace("App\\Commands");

$app = $builder->build();
try {
	$app->run();
} catch (Throwable $e) {
	$app->services->get(ExceptionHandler::class)->handleException($e);
}
